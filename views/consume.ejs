<% include usernav.ejs%>


    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
        <a class="btn-floating btn-large waves-effect waves-light red tooltipped modal-trigger" data-position="top" data-delay="25"
            data-tooltip="Calculate" href="#modal2">
              <i class="material-icons">subject</i>
            </a>

    </div>



    <div class="row">
            <div class="col s12 m6 l4">
              <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                  <span class="card-title">Today's Overall Consumption</span>
                  <span class="card-title"><%=dates%></span>
                  <p>Calories: <%= over.calories %></p><br>
                  <p>Carbohydrates: <%= over.carbohydrate %></p><br>
                  <p>Fats: <%= over.fat %></p><br>
                  <p>Proteins: <%= over.protein %></p><br>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
                    <% if(res=="No"){%>
                          <h5 class="center-align">No Items Added</h5>      
                      <% }else {%>
                      <% for(var i=0; i<res.length; i++) {%>
                          
                            <div class="container card col s12 m5" style="margin-left:5%">
                        
                          <div class="card-content">
                            <p>            <%= res[i].name  %>
                            </p>
                          </div>
                          <div class="card-tabs">
                            <ul class="tabs tabs-fixed-width">
                              <li class="tab"><a href="#test4<%= i %>">Calories</a></li>
                              <li class="tab"><a class="active" href="#test5<%= i %>">Carbohydrate</a></li>
                              <li class="tab"><a href="#test6<%= i %>">Fat</a></li>
                              <li class="tab"><a href="#test7<%= i %>">Protein</a></li>
                            </ul>
                          </div>
                          <div class="card-content grey lighten-4">
                            <div id="test4<%= i %>"> <%= res[i].calories  %></div>
                            <div id="test5<%= i %>"> <%= res[i].carbohydrate  %></div>
                            <div id="test6<%= i %>"> <%= res[i].fat  %></div>
                            <div id="test7<%= i %>"> <%= res[i].protein  %></div>
                          </div>
                        
                        </div>
                      
                      
                
                        <% } %>
                        
                
                        <% } %>
                
                    
                
                </div>
                
        
        


    <!-- Modal Structure -->


    <!-- ..................................................................................................................................... -->


    <div id="modal2" class="modal row ">
        <div class=" modal-content">

            <div class="row">
                <div class="input-field col s12 center">
                    <h3 class="center " style="font-family:Streetwear;text-shadow: 0px 2px 2px black;  color:#1dc072">Consumption</h3>
                </div>
            </div>
            <div id="AX">

</div>

    </div>
</div>

    <!-- ..................................................................................................................................... -->



 


    <script>

 // Listening for auth state changes.
 firebase.auth().onAuthStateChanged(function(user) {
    console.log(user.uid);

    
                 // User is signed in.
                 document.getElementById("AX").innerHTML='<form action="/addUserConsumption" method="post">\
                    <div id="items">\
                <div id="item" class="row margin">\
                    <div class="col s12 m6 l6">\
                        <div class="input-field col s12">\
                            <input type="text" name="itemFood" id="itemFood" class="autocomplete">\
                            <label for="itemFood">Food item</label>\
                        </div>\
                    </div>\
                    <div class="col s12 m6 l6">\
                        <div class="input-field col s12">\
                            <input id="itemQaun" type="number" name="itemQaun" class="validate">\
                            <label for="itemQaun">Quantity</label>\
                        </div>\
                    </div>\
                </div>\
            </div>\
        <div class="row"> <div class="col s12 m3 l3">\
                <input id="date" type="text" name="date" class="datepicker">\
                <label for="date">Date</label>\
            </div>\
            <div class="col s12 m3 l3">\
                <input id="time" type="text" name="time" class="timepicker">\
                <label for="time">Time</label>\
            </div>\
        </div>\
        <input style="display:none;" type="text" name="uid" id="uid" value="'+user.uid+'"></input><br><br><br>\
        <div class="row">\
            <button style="background-color:#1dc072" class="btn waves-effect waves-light col s6" type="submit" name="action">Add Item\
                            <i class="material-icons right">send</i>\
                        </button>\
        </div>\
    </form>'
            });


    </script>


<script>

    

        $(document).ready(function () {
            // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
            $('.modal').modal();

   
      



            $(document).on("focus", ".datepicker", function(){
                $(this).pickadate({
                selectMonths: true, // Creates a dropdown to control month
                selectYears: 25, // Creates a dropdown of 15 years to control year,
                today: 'Today',
                clear: 'Clear',
                close: 'Ok',
                closeOnSelect: false // Close upon selecting a date,
            });

    });

    $(document).on("focus", ".timepicker", function(){
        $(this).pickatime({
            default: 'now', // Set default time: 'now', '1:30AM', '16:30'
            fromnow: 0, // set default time to * milliseconds from now (using with default = 'now')
            twelvehour: false, // Use AM/PM or 24-hour format
            donetext: 'OK', // text for done-button
            cleartext: 'Clear', // text for clear-button
            canceltext: 'Cancel', // Text for cancel-button
            autoclose: false, // automatic close timepicker
            ampmclickable: true, // make AM PM clickable
            aftershow: function () {} //Function for after opening timepicker
        });

    });


    



        });


       
  





  
             
    </script>



    <% include footer.ejs%>